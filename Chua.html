<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lucky Orbs v2.1 — Full Cosmetic System</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#071029; --card:#071827; --accent:#7c3aed; --accent-2:#06b6d4; --glass:rgba(255,255,255,0.04);
  --muted:rgba(255,255,255,0.66); --text:#e6eef8; --radius:14px; --max-width:1200px; --orb-size:220px;
  font-family:Inter, Poppins, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg) 0%, #03121a 100%);
  color:var(--text);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:24px;
  transition: background 0.4s ease;
}
.app{width:100%;max-width:var(--max-width)}
header{display:flex;gap:12px;align-items:center;margin-bottom:14px}
h1{margin:0;font-size:20px}
p.lead{margin:0;color:var(--muted);font-size:13px}
.layout{display:grid;grid-template-columns:320px 1fr 360px;gap:16px}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);border:1px solid rgba(255,255,255,0.04);padding:16px;border-radius:var(--radius);box-shadow:0 10px 40px rgba(2,6,23,0.6);transition:all 0.3s ease}
.left .profile{display:flex;align-items:center;gap:12px}
.avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#0ea5a4,#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:800;transition:transform 0.3s ease}
.avatar:hover{transform:scale(1.1)}

.orb-wrap{display:flex;flex-direction:column;align-items:center;gap:14px}
.orb{
  width:var(--orb-size);height:var(--orb-size);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  position:relative;overflow:hidden;
  box-shadow:0 30px 80px rgba(2,6,23,0.6);
  transition:transform 0.4s ease;
}
.orb .skin{
  position:absolute;inset:0;background-size:cover;background-position:center;
  transform-origin:center;
  transition:transform 600ms cubic-bezier(.2,.9,.2,1);
  border-radius:50%;
}
.orb .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.18))}
.orb .center{position:relative;z-index:5;text-align:center}
.value{font-size:44px;font-weight:800;letter-spacing:1px}
.rarity{font-weight:800;font-size:13px;padding:6px 12px;border-radius:999px;display:inline-block;margin-top:8px;transition:all 0.3s ease}

.controls{display:flex;gap:10px;align-items:center}
.btn{appearance:none;border:0;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer;transition:all 0.2s ease}
.btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;box-shadow:0 14px 36px rgba(124,58,237,0.14)}
.btn-primary:hover{transform:scale(1.05)}
.btn-ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}
.btn-ghost:hover{background:rgba(255,255,255,0.05);transform:scale(1.05)}

.shop-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);transition:all 0.2s ease}
.shop-item:hover{background:rgba(255,255,255,0.03);transform:translateY(-2px);}
.skin-thumb{width:64px;height:64px;border-radius:10px;overflow:hidden;flex-shrink:0;border:1px solid rgba(255,255,255,0.03);background-size:cover;transition:all 0.3s ease}
.skin-thumb:hover{transform:scale(1.1)}
.skin-meta{flex:1;display:flex;justify-content:space-between;align-items:center}

.log{height:240px;overflow:auto;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:12px;border-radius:10px;font-family:monospace;font-size:13px}
.skin-list{display:grid;grid-template-columns:1fr;gap:8px;margin-top:8px}
.skin-list div{display:flex;justify-content:space-between;align-items:center;transition:all 0.2s ease}
.skin-list div:hover{background:rgba(255,255,255,0.03);border-radius:8px}

.orb.spin .skin{animation:orbSpin 2.6s cubic-bezier(.2,.9,.2,1)}
@keyframes orbSpin{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(1.05)}100%{transform:rotate(360deg) scale(1)}}

@keyframes rainbowMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.skin-animated{background-size:200% 200%;animation:rainbowMove 6s linear infinite}

@media (max-width:1100px){.layout{grid-template-columns:1fr;}.orb{--orb-size:180px}}
</style>
</head>
<body>
<div class="app">
<header>
  <div>
    <h1>Lucky Orbs v2.1 — Cosmetic System</h1>
    <p class="lead">All-new skins, animated effects, negative rarities, per-minute high scores, and shop improvements!</p>
  </div>
</header>
<div class="layout">
<aside class="card left">
<div class="profile">
<div class="avatar" id="playerAvatar">U</div>
<div>
<div style="font-weight:800" id="playerName">You</div>
<div class="muted">Balance: ₱<span id="balance">0</span></div>
</div></div>
<hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0;border-radius:2px">
<div><div class="muted">Owned Skins</div><div class="skin-list" id="achGrid"></div></div>
</aside>

<main class="card center">
<div class="orb-wrap">
<div class="orb" id="orb"><div class="skin" id="orbSkin"></div><div class="overlay"></div>
<div class="center"><div class="value" id="value">—</div><div id="rarityBadge" class="rarity">—</div></div></div>

<div class="controls">
<button id="rollBtn" class="btn btn-primary">ROLL (₱<span id="rollCostDisplay">5</span>)</button>
<button id="multiBtn" class="btn btn-ghost">×10</button>
<select id="skinPicker"></select>
</div>
<div style="display:flex;gap:12px;justify-content:space-between;width:100%;margin-top:10px">
<div class="muted">Last Win: <span id="lastWin">—</span></div>
<div class="muted">Seed: <span id="seedShort">—</span></div>
</div>
<div style="width:100%;margin-top:12px">
<div class="muted">Activity Log</div><div class="log" id="log"></div></div>
<div style="margin-top:12px"><div class="muted">High Score (per min): <span id="highScore">0</span></div></div>
</main>

<aside class="card right">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
<div class="muted">Cosmetic Shop</div>
<div class="muted">Owned: <span id="ownedCount">0</span></div></div>
<div id="shopList"></div>
</aside>
</div>
</div>

<script>
(function(){
const balanceEl=document.getElementById('balance');
const valueEl=document.getElementById('value');
const rarityEl=document.getElementById('rarityBadge');
const orbSkinEl=document.getElementById('orbSkin');
const orbEl=document.getElementById('orb');
const rollBtn=document.getElementById('rollBtn');
const multiBtn=document.getElementById('multiBtn');
const logEl=document.getElementById('log');
const seedShort=document.getElementById('seedShort');
const highScoreEl=document.getElementById('highScore');
const ownedCountEl=document.getElementById('ownedCount');
const skinPicker=document.getElementById('skinPicker');
const achGrid=document.getElementById('achGrid');

const KEY='lucky-orbs-v2.1';
const defaultState={
balance:200,
rolls:0,
lastWin:'—',
seed:(new Date().getTime()+Math.floor(Math.random()*1e9)).toString(36).slice(0,8),
skinsOwned:['classic','rainbow'],
activeSkin:'classic',
rollCost:5,
currentScore:0,
highScore:0
};
let state={};

function load(){try{const s=JSON.parse(localStorage.getItem(KEY));state=s?{...defaultState,...s}:{...defaultState}}catch(e){state={...defaultState}}}
function save(){localStorage.setItem(KEY,JSON.stringify(state))}
function rng(){const s=state.seed.split('').reduce((a,c)=>a+c.charCodeAt(0),0);const t=performance.now();const x=Math.sin(t*0.000021+s)*10000;return x-Math.floor(x)}

// Added more skins with animations
const generatedSkins={
'classic':()=>`radial-gradient(circle at 30% 30%, #7c3aed,#3b82f6)`,
'rainbow':()=>`conic-gradient(red,orange,yellow,green,blue,indigo,violet)`,
'lava':()=>`radial-gradient(circle at 50% 50%, #f87171, #b91c1c)`,
'galaxy':()=>`radial-gradient(circle at 30% 30%, #0ea5a4,#3b82f6,#7c3aed)`,
'void':()=>`radial-gradient(circle at 50% 50%, #000000, #1e1e1e, #3b3b3b)`,
'sunrise':()=>`radial-gradient(circle at 50% 50%, #fb923c,#fcd34d)`,
'ocean':()=>`radial-gradient(circle at 50% 50%, #3b82f6,#06b6d4)`,
'electric':()=>`repeating-conic-gradient(#22d3ee 0 15deg, #facc15 15deg 30deg)`,
'firework':()=>`radial-gradient(circle at 50% 50%, #f43f5e,#fbbf24,#22d3ee)`,
'neon':()=>`linear-gradient(45deg, #0ff,#f0f,#ff0,#0f0)`
};

const shopItems=[
{skin:'rainbow',price:150},
{skin:'lava',price:200},
{skin:'galaxy',price:300},
{skin:'void',price:500},
{skin:'sunrise',price:400},
{skin:'ocean',price:250},
{skin:'electric',price:600},
{skin:'firework',price:700},
{skin:'neon',price:800}
];

function populateShop(){
const shopList=document.getElementById('shopList');
shopList.innerHTML='';
shopItems.forEach(i=>{
if(!state.skinsOwned.includes(i.skin)){
const div=document.createElement('div');
div.className='shop-item';
div.innerHTML=`<div class="skin-thumb skin-animated" style="background:${generatedSkins[i.skin]()}"></div><div class="skin-meta">${i.skin} — ₱${i.price} <button class="btn btn-ghost">Buy</button></div>`;
div.querySelector('button').addEventListener('click',()=>buySkin(i.skin,i.price));
shopList.appendChild(div);
}
})
}

function buySkin(skin,price){
if(state.balance>=price){
state.balance-=price;
if(!state.skinsOwned.includes(skin)) state.skinsOwned.push(skin);
pushLog(`Bought skin: ${skin}`);
updateUI();save();
}else alert('Not enough coins');
}

function pushLog(txt){const n=document.createElement('div');n.textContent=txt;n.style.padding='4px 0';logEl.prepend(n);while(logEl.childNodes.length>300)logEl.removeChild(logEl.lastChild)}

function rollOnce(){
if(state.balance<state.rollCost){pushLog('Not enough coins');return;}
state.balance-=state.rollCost;state.rolls++;
orbEl.classList.add('spin');
setTimeout(()=>orbEl.classList.remove('spin'),2600);

const r=Math.floor(rng()*100)+1;
let points=0;let rarity='Common';

if(r>=99){rarity='Mythic';points=Math.floor(Math.random()*200)+50}
else if(r>=95){rarity='Legendary';points=Math.floor(Math.random()*100)+30}
else if(r>=80){rarity='Epic';points=Math.floor(Math.random()*40)+10}
else if(r>=50){rarity='Rare';points=Math.floor(Math.random()*10)+5}
else if(r>=45){rarity='Negarare';points=-Math.floor(Math.random()*10+5)}
else if(r>=40){rarity='Negaepic';points=-Math.floor(Math.random()*40+10)}
else if(r>=35){rarity='Negalegend';points=-Math.floor(Math.random()*100+30)}
else{rarity='Negamythic';points=-Math.floor(Math.random()*200+50)}

state.balance+=points;
state.currentScore+=points;
if(state.currentScore>state.highScore) state.highScore=state.currentScore;

valueEl.textContent=r;
rarityEl.textContent=rarity;
state.lastWin=`${rarity} (${points>0?'+':'-'}${Math.abs(points)})`;
pushLog(`#${state.rolls}: ${rarity} ${points>0?'+':'-'}${Math.abs(points)}`);
updateUI(); save();
}

rollBtn.addEventListener('click',()=>rollOnce());
multiBtn.addEventListener('click',()=>{for(let i=0;i<10;i++)rollOnce()});

function populateSkinPicker(){
skinPicker.innerHTML='';
state.skinsOwned.forEach(skin=>{
const opt=document.createElement('option');
opt.value=skin; opt.textContent=skin;
skinPicker.appendChild(opt);
});
skinPicker.value=state.activeSkin;
skinPicker.onchange=()=>{state.activeSkin=skinPicker.value;updateUI();save();}
}

function populateOwnedSkins(){
achGrid.innerHTML='';
state.skinsOwned.forEach(skin=>{
const div=document.createElement('div');
div.innerHTML=`${skin} <button class="btn btn-ghost">Equip</button>`;
div.querySelector('button').addEventListener('click',()=>{state.activeSkin=skin;updateUI();save();});
achGrid.appendChild(div);
})
}

function updateUI(){
balanceEl.textContent=state.balance;
seedShort.textContent=state.seed.slice(0,6);
document.getElementById('lastWin').textContent=state.lastWin;
highScoreEl.textContent=state.highScore;
ownedCountEl.textContent=state.skinsOwned.length;
orbSkinEl.style.background=generatedSkins[state.activeSkin]();
populateSkinPicker();
populateOwnedSkins();
populateShop();
}

load();updateUI();

setInterval(()=>{
state.currentScore=0;
state.seed=(new Date().getTime()+Math.floor(Math.random()*1e9)).toString(36).slice(0,8);
pushLog('--- Minute Reset ---');
updateUI();save();
},60000);

})();
</script>
</body>
</html>
